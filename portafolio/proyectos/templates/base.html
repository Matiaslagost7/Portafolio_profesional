{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Meta tags básicos para codificación, viewport responsivo y SEO -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Portafolio profesional de Matias Lagos T. Desarrollo web frontend, backend y habilidades blandas. Proyectos, contacto y experiencia." />
    <meta name="theme-color" content="#0062cc">
    <!-- Favicon genérico (puedes reemplazar por tu propio icono) -->
    <link rel="icon" type="image/webp" href="{% static 'images/foto_perfil.webp' %}">
    
    <title>{% block title %}Portafolio - Matias Lagos T.{% endblock %}</title>
        {% block extra_head %}{% endblock %}
    
    <!-- Framework CSS Bootstrap 5.3 para diseño responsivo -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Fuente personalizada Montserrat desde Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- Estilos CSS personalizados -->
    <link rel="stylesheet" href="{% static 'styles/base.css' %}">
    <link rel="stylesheet" href="{% static 'styles/encabezado.css' %}">
    <link rel="stylesheet" href="{% static 'styles/heroe.css' %}">
    <link rel="stylesheet" href="{% static 'styles/acerca-de.css' %}">
    <link rel="stylesheet" href="{% static 'styles/habilidades.css' %}">
    <link rel="stylesheet" href="{% static 'styles/proyectos.css' %}">
    <link rel="stylesheet" href="{% static 'styles/contacto.css' %}">
    <link rel="stylesheet" href="{% static 'styles/pie-pagina.css' %}">
    <link rel="stylesheet" href="{% static 'styles/responsivo.css' %}">
    
    <!-- Script JavaScript modularizado -->
    <script src="{% static 'js/principal.js' %}" type="module"></script>
</head>
<body>
    <!-- ========== HEADER ==========
         El header contiene la navegación principal del sitio.
    -->
    <header>
        <!-- ========== NAVBAR ==========
             Barra de navegación fija en la parte superior con:
             - Logo/nombre en la izquierda
             - Menú de navegación con enlaces a las secciones
             - Enlaces sociales (LinkedIn y GitHub) con iconos SVG
             - Diseño responsivo con botón hamburguesa en móviles
        -->
        <nav class="navbar navbar-expand-lg">
            <div class="container-fluid px-3 px-lg-4">
                <!-- BRAND -->
                <a class="navbar-brand" href="{% url 'home' %}">Matias Lagos T.</a>

                <!-- TOGGLE BUTTON -->
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- COLLAPSIBLE CONTENT -->
                <div class="collapse navbar-collapse" id="navbarNav">
                    <!-- NAVIGATION MENU -->
                    <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'home' %}">Inicio</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'home' %}#about">Acerca de</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'home' %}#skills">Habilidades</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'home' %}#projects">Proyectos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'home' %}#contact">Contacto</a>
                        </li>
                    </ul>

                    <!-- CONTROLS (RIGHT SECTION) -->
                    <div class="navbar-controls ms-lg-auto">
                        <!-- USER GREETING -->
                        {% if user.is_authenticated %}
                        <span class="user-greeting">Hola, {{ user.first_name|default:user.username }}!</span>
                        {% endif %}

                        <!-- ACTION BUTTONS -->
                        <div class="navbar-buttons">
                            {% if user.is_superuser %}
                            <a href="{% url 'dashboard' %}" class="btn btn-warning">⚙️ Panel Admin</a>
                            {% endif %}

                            {% if user.is_authenticated %}
                            <a href="{% url 'logout' %}" class="btn btn-outline-danger">Cerrar Sesión</a>
                            {% else %}
                            <a href="{% url 'login' %}" class="btn btn-primary">Ingresar</a>
                            <a href="{% url 'registro' %}" class="btn btn-outline-primary">Registrarse</a>
                            {% endif %}
                        </div>

                        <!-- SOCIAL ICONS -->
                        <div class="social-nav">
                            <a href="https://www.linkedin.com/in/matias-lagos-tapia-667b192b8/" target="_blank"
                                rel="noopener noreferrer" class="social-link" aria-label="LinkedIn">
                                <svg class="social-svg" viewBox="0 0 24 24">
                                    <path
                                        d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.39v-1.2h-2.84v8.37h2.84v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.84M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77Z" />
                                </svg>
                            </a>
                            <a href="https://github.com/Matiaslagost7" target="_blank" rel="noopener noreferrer"
                                class="social-link" aria-label="GitHub">
                                <svg class="social-svg" viewBox="0 0 24 24">
                                    <path
                                        d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.868-.013-1.703-2.782.603-3.369-1.343-3.369-1.343-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.547 2.914 1.186.092-.923.35-1.547.636-1.903-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.137 20.167 22 16.42 22 12c0-5.523-4.477-10-10-10z" />
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Mensajes del sistema como Toast -->
    {% if messages %}
    <div id="toast-container">
        {% for message in messages %}
            <div class="toast-notification {{ message.tags }} show" role="alert" aria-live="assertive" aria-atomic="true">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span style="font-weight: 500;">{{ message }}</span>
                    <button type="button" style="background: none; border: none; cursor: pointer; color: inherit; font-size: 1.5rem; padding: 0; margin-left: 1rem;" data-bs-dismiss="alert" aria-label="Close">&times;</button>
                </div>
            </div>
        {% endfor %}
    </div>
    <script>
        // Auto-ocultar toasts después de 4 segundos
        document.querySelectorAll('.toast-notification').forEach(toast => {
            setTimeout(() => {
                toast.classList.add('hide');
                setTimeout(() => toast.remove(), 300);
            }, 4000);
        });
    </script>
    {% endif %}

    <main id="main-content">
    {% block content %}{% endblock %}
    </main>

    <!-- ========== FOOTER ==========
         Pie de página con copyright
    -->
    <footer class="main-footer">
        <div class="footer-content">
            <h2 class="footer-logo">
                Matias <span class="footer-highlight">Lagos T.</span>
            </h2>
            <p class="footer-text">
                Desarrollador apasionado por crear soluciones web<br>innovadoras y funcionales.
            </p>
            <div class="footer-social">
                <a href="https://github.com/Matiaslagost7" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><i class="fab fa-github"></i></a>
                <a href="https://linkedin.com/in/matias-lagos-torres-04b8a4265" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                <a href="mailto:matiaslagost7@gmail.com" aria-label="Email"><i class="fas fa-envelope"></i></a>
                <a href="https://wa.me/56949625995" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
            </div>
            <hr class="footer-divider">
            <div class="footer-bottom">
                <p>&copy; 2025 Matias Lagos T. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
